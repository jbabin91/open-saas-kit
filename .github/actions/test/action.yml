name: Test
description: Run tests with optional coverage

inputs:
  coverage:
    description: Run tests with coverage
    required: false
    default: 'false'

runs:
  using: composite
  steps:
    - name: Install Playwright browsers
      shell: bash
      run: pnpm exec playwright install chromium --with-deps

    - name: Run tests
      if: inputs.coverage == 'false'
      shell: bash
      run: pnpm test

    - name: Run tests with coverage
      if: inputs.coverage == 'true'
      shell: bash
      run: pnpm test:coverage
